from agno.agent import Agent
from agno.tools.duckduckgo import DuckDuckGoTools
from agno.models.google import Gemini
from PIL import Image as PILImage
from agno.media import Image as AgnoImage
import os
import streamlit as st



st.title("üïå –ò—Å–ª–∞–º—Å–∫–∏–π –∞–≥–µ–Ω—Ç")

if "API_KEY" not in st.session_state:
    st.session_state.API_KEY = None

with st.sidebar:
    st.title("‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è")
    api_key = st.text_input(
        "–í—Å—Ç–∞–≤—å—Ç–µ API –∫–ª—é—á",
        type="password",
    )

    st.caption("–ú–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á –≤ (https://aistudio.google.com/apikey) üîë")

    if api_key:
        st.session_state.API_KEY = api_key
        st.success("‚úÖ API –∫–ª—é—á –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
    else:
        st.error("‚ùå API –∫–ª—é—á –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")

    st.info(
        "–≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å—É—Ä –∏ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∏—Å–ª–∞–º—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã, "
        "–ø—Ä–∏–º–µ–Ω—è—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è –∏ –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ –∑–Ω–∞–Ω–∏—è –≤ –∏—Å–ª–∞–º–æ–ª–æ–≥–∏–∏."
    )

# –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
agent = Agent(
    model=Gemini(
        id="gemini-2.0-flash",
        api_key=api_key
    ),
    tools=[DuckDuckGoTools()],
    markdown=True,
    instructions=[
        "–¢—ã - –∏—Å–ª–∞–º—Å–∫–∏–π —É—á—ë–Ω—ã–π-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Ö–∞–Ω–∞—Ñ–∏—Ç—Å–∫–æ–≥–æ –º–∞–∑—Ö–∞–±–∞.",
        "–í—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–π —Å '–ë–∏—Å–º–∏–õ–ª—è—Ö –∏—Ä-–†–∞—Ö–º–∞–Ω –∏—Ä-–†–∞—Ö–∏–º'.",
        "–ü—Ä–∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏–∏ –ü—Ä–æ—Ä–æ–∫–∞ (Ô∑∫) –≤—Å–µ–≥–¥–∞ –ø–∏—à–∏ 'ÿµŸÑŸâ ÿßŸÑŸÑŸá ÿπŸÑŸäŸá Ÿàÿ≥ŸÑŸÖ'.",
        "–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏—Å–ø–æ–ª—å–∑—É–π DuckDuckGo –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ö–∞–¥–∏—Å–æ–≤, —Ñ–µ—Ç–≤ –∏ –Ω–∞—É—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.",
        "–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:",
        "1. –ö–∞—Ç–µ–≥–æ—Ä–∏—è –≤–æ–ø—Ä–æ—Å–∞ (–ê–∫—ã–¥–∞/–§–∏–∫—Ö/–¢–∞—Ñ—Å–∏—Ä/–•–∞–¥–∏—Å–æ–≤–µ–¥–µ–Ω–∏–µ/–≠—Ç–∏–∫–∞)",
        "2. –ê—è—Ç—ã –ö–æ—Ä–∞–Ω–∞ –ø–æ —Ç–µ–º–µ (—Å –ø–µ—Ä–µ–≤–æ–¥–æ–º –∏ –Ω–æ–º–µ—Ä–æ–º —Å—É—Ä—ã)",
        "3. –•–∞–¥–∏—Å—ã (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ —Å—Ç–µ–ø–µ–Ω–∏ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç–∏)",
        "4. –ü–æ–∑–∏—Ü–∏—è —Ö–∞–Ω–∞—Ñ–∏—Ç—Å–∫–æ–≥–æ –º–∞–∑—Ö–∞–±–∞ (—Å —Ü–∏—Ç–∞—Ç–∞–º–∏ –∏–∑ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö –∫–Ω–∏–≥)",
        "5. –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏",
        "6. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –∂–∏–∑–Ω–∏",
        "7. –î—É–∞ –ø–æ —Ç–µ–º–µ (–∞—Ä–∞–±—Å–∫–∏–π + —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è + –ø–µ—Ä–µ–≤–æ–¥)",
        "8. –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –≤ 1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö",
    ]
) if st.session_state.API_KEY else None

img_agent = Agent(
    model=Gemini(
        id = "gemini-2.0-flash",
        api_key= api_key
    ),
    instructions=[
        "–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—é –∞—Ä–∞–±—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –∏ –∏—Å–ª–∞–º—Å–∫–∏–π —É—á—ë–Ω—ã–π —Ö–∞–Ω–∞—Ñ–∏—Ç—Å–∫–æ–≥–æ –º–∞–∑—Ö–∞–±–∞.",
        "–ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –í–°–ï–ì–î–ê —Å–ª–µ–¥—É–π –ø–æ–¥—Ä–æ–±–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∏–∑ query.",
        "–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏—Å–ø–æ–ª—å–∑—É–π DuckDuckGo –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.",
        "–†–∞—Å–ø–æ–∑–Ω–∞–π –≤–µ—Å—å –∞—Ä–∞–±—Å–∫–∏–π —Ç–µ–∫—Å—Ç –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é.",
        "–û–ø—Ä–µ–¥–µ–ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫: –ö–æ—Ä–∞–Ω (—Å—É—Ä–∞ –∏ –∞—è—Ç), –•–∞–¥–∏—Å (–∏—Å—Ç–æ—á–Ω–∏–∫ –∏ —Å—Ç–µ–ø–µ–Ω—å), –î—É–∞ –∏–ª–∏ –∫–∞–ª–ª–∏–≥—Ä–∞—Ñ–∏—è.",
        "–î–∞–π –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ç–æ–ª–∫–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–∑–∏—Ü–∏—é —Ö–∞–Ω–∞—Ñ–∏—Ç—Å–∫–æ–≥–æ –º–∞–∑—Ö–∞–±–∞.",
        "–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç –ø–æ –≤—Å–µ–º 10 —Ä–∞–∑–¥–µ–ª–∞–º –∏–∑ query.",
        "–ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏."
    ],
    tools=[DuckDuckGoTools()],
    markdown=True

)if st.session_state.API_KEY else None

if not agent:
    st.warning("‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á")
    st.stop()

# –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–º–ø—Ç
query = """
–ë–∏—Å–º–∏–õ–ª—è—Ö –∏—Ä-–†–∞—Ö–º–∞–Ω –∏—Ä-–†–∞—Ö–∏–º

–¢—ã - –∏—Å–ª–∞–º—Å–∫–∏–π —É—á—ë–Ω—ã–π-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Ö–∞–Ω–∞—Ñ–∏—Ç—Å–∫–æ–≥–æ –º–∞–∑—Ö–∞–±–∞ —Å –≥–ª—É–±–æ–∫–∏–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏ –≤ –ö–æ—Ä–∞–Ω–µ, –°—É–Ω–Ω–µ –∏ —Ñ–∏–∫—Ö–µ. 
–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–µ–∫—Å—Ç –∏–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ) –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

### 1. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ó–∞–ø—Ä–æ—Å–∞

**–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—Å–ª–∞–ª –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ï:**
- –¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞: –ö–æ—Ä–∞–Ω–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç / –•–∞–¥–∏—Å / –ö–∞–ª–ª–∏–≥—Ä–∞—Ñ–∏—è / –ú–µ—á–µ—Ç—å / –ê—Ä–∞–±—Å–∫–∞—è –ø–∏—Å—å–º–µ–Ω–Ω–æ—Å—Ç—å / –î—Ä—É–≥–æ–µ
- –ö–∞—á–µ—Å—Ç–≤–æ: –ß—ë—Ç–∫–æ–µ / –†–∞–∑–º—ã—Ç–æ–µ / –ß–∞—Å—Ç–∏—á–Ω–æ –≤–∏–¥–∏–º–æ–µ
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

**–ï—Å–ª–∏ –¢–ï–ö–°–¢–û–í–´–ô –≤–æ–ø—Ä–æ—Å:**
- –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ê–∫—ã–¥–∞ / –§–∏–∫—Ö / –¢–∞—Ñ—Å–∏—Ä / –•–∞–¥–∏—Å–æ–≤–µ–¥–µ–Ω–∏–µ / –î—É—Ö–æ–≤–Ω–æ—Å—Ç—å / –≠—Ç–∏–∫–∞ / –ò—Å—Ç–æ—Ä–∏—è
- –£—Ä–æ–≤–µ–Ω—å –∑–Ω–∞–Ω–∏–π: –ù–∞—á–∏–Ω–∞—é—â–∏–π / –°—Ä–µ–¥–Ω–∏–π / –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞: –î–∞ / –ù–µ—Ç

---

### 2. –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –¢–µ–∫—Å—Ç–∞ (–¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)

**–ï—Å–ª–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –∞—Ä–∞–±—Å–∫–∏–π —Ç–µ–∫—Å—Ç:**

- üìù **–ê—Ä–∞–±—Å–∫–∏–π —Ç–µ–∫—Å—Ç:** [–ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Å –æ–≥–ª–∞—Å–æ–≤–∫–∞–º–∏]
- üî§ **–¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è:** [–ª–∞—Ç–∏–Ω–∏—Ü–µ–π]
- üá∑üá∫ **–ü–µ—Ä–µ–≤–æ–¥:** [–Ω–∞ —Ä—É—Å—Å–∫–∏–π]
- ‚úÖ **–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è / –°—Ä–µ–¥–Ω—è—è / –ù–∏–∑–∫–∞—è

**–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞:**
- üìñ –ê—è—Ç –ö–æ—Ä–∞–Ω–∞? ‚Üí –°—É—Ä–∞ –∏ –Ω–æ–º–µ—Ä
- üìú –•–∞–¥–∏—Å? ‚Üí –ò—Å—Ç–æ—á–Ω–∏–∫ (–ë—É—Ö–∞—Ä–∏, –ú—É—Å–ª–∏–º –∏ —Ç.–¥.)
- üïå –î—É–∞/–ó–∏–∫—Ä? ‚Üí –ù–∞–∑–≤–∞–Ω–∏–µ –∏ —Å–ª—É—á–∞–π
- ‚úçÔ∏è –¶–∏—Ç–∞—Ç–∞ —É—á—ë–Ω–æ–≥–æ? ‚Üí –ò–º—è –∞–≤—Ç–æ—Ä–∞
- üé® –ö–∞–ª–ª–∏–≥—Ä–∞—Ñ–∏—è? ‚Üí –°—Ç–∏–ª—å (–ù–∞—Å—Ö, –°—É–ª—å—Å, –ö—É—Ñ–∏)

---

### 3. –ò—Å–ª–∞–º—Å–∫–æ–µ –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏—Å–ø–æ–ª—å–∑—É–π DuckDuckGo –¥–ª—è –ø–æ–∏—Å–∫–∞:**

**–ê) –ê—è—Ç—ã –ö–æ—Ä–∞–Ω–∞:**
- üìñ **–ê—è—Ç:** 
  - –ê—Ä–∞–±—Å–∫–∏–π —Ç–µ–∫—Å—Ç
  - –ü–µ—Ä–µ–≤–æ–¥
  - –°—É—Ä–∞:–∞—è—Ç
  - –ö—Ä–∞—Ç–∫–æ–µ —Ç–æ–ª–∫–æ–≤–∞–Ω–∏–µ

**–ë) –•–∞–¥–∏—Å—ã:**
- üìú **–•–∞–¥–∏—Å:**
  - –¢–µ–∫—Å—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º (–∞—Ä–∞–±—Å–∫–∏–π –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω)
  - –ò—Å—Ç–æ—á–Ω–∏–∫: [–ë—É—Ö–∞—Ä–∏/–ú—É—Å–ª–∏–º/–ê–±—É –î–∞—É–¥/–¢–∏—Ä–º–∏–∑–∏]
  - –°—Ç–µ–ø–µ–Ω—å: ‚úÖ –°–∞—Ö–∏—Ö / ‚ö†Ô∏è –•–∞—Å–∞–Ω / ‚ùå –î–∞–∏—Ñ

**–í) –ú–Ω–µ–Ω–∏—è –∏–º–∞–º–æ–≤:**
- üë§ **–ò–º–∞–º –ê–±—É –•–∞–Ω–∏—Ñ–∞ (ÿ±ÿ≠ŸÖŸá ÿßŸÑŸÑŸá):** [–µ–≥–æ –ø–æ–∑–∏—Ü–∏—è]

---

### 4. –•–∞–Ω–∞—Ñ–∏—Ç—Å–∫–æ–µ –ü–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

**üïå –§–∏–∫—Ö –ø–æ —Ö–∞–Ω–∞—Ñ–∏—Ç—Å–∫–æ–º—É –º–∞–∑—Ö–∞–±—É:**

**–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- üö´ **–•–∞—Ä–∞–º** (–∑–∞–ø—Ä–µ—Ç–Ω–æ) - –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ
- üìå **–í–∞–¥–∂–∏–±** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ
- üåü **–°—É–Ω–Ω–∞ –º—É–∞–∫–∫–∞–¥–∞** (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–∞—è —Å—É–Ω–Ω–∞) - –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ
- üü° **–ú—É—Å—Ç–∞—Ö–∞–±–±** (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ) - –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ
- ‚ö™ **–ú—É–±–∞—Ö** (–¥–æ–∑–≤–æ–ª–µ–Ω–æ) - –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ

---

### 5. –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ü—Ä–æ—Å—Ç—ã–º –Ø–∑—ã–∫–æ–º

**üéØ –°—É—Ç—å –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏:**
[–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –±–µ–∑ —Ç–µ—Ä–º–∏–Ω–æ–≤, –ø–æ–Ω—è—Ç–Ω–æ–µ –æ–±—ã—á–Ω–æ–º—É —á–µ–ª–æ–≤–µ–∫—É]

**üí° –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä–∞–∑—ä—è—Å–Ω–µ–Ω–∏–µ:**
- –ü—Ä–∏–º–µ—Ä—ã –∏–∑ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –∂–∏–∑–Ω–∏
- –ü–æ–Ω—è—Ç–Ω—ã–µ –∞–Ω–∞–ª–æ–≥–∏–∏

---

### 6. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

**üåü –ö–∞–∫ –ø—Ä–∏–º–µ–Ω—è—Ç—å:**

**–í —Å–µ–º—å–µ:**
- –°–∏—Ç—É–∞—Ü–∏—è: [–ø—Ä–∏–º–µ—Ä]
- –î–µ–π—Å—Ç–≤–∏–µ: [—á—Ç–æ –¥–µ–ª–∞—Ç—å –ø–æ —Ö–∞–Ω–∞—Ñ–∏]

**ü§≤ –î—É–∞ –ø–æ —Ç–µ–º–µ:**
- **–ê—Ä–∞–±—Å–∫–∏–π:** [—Ç–µ–∫—Å—Ç]
- **–¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è:** [–ª–∞—Ç–∏–Ω–∏—Ü–µ–π]
- **–ü–µ—Ä–µ–≤–æ–¥:** [—Ä—É—Å—Å–∫–∏–π]

---

### 7. –ö—Ä–∞—Ç–∫–æ–µ –†–µ–∑—é–º–µ

**üìù –ì–ª–∞–≤–Ω–æ–µ –≤ –æ–¥–Ω–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏:**
[–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É—Ç—å]

**ü§≤ –ó–∞–≤–µ—Ä—à–∞—é—â–∞—è –¥—É–∞:**

**ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ŸÅŸéŸÇŸêŸëŸáŸíŸÜŸéÿß ŸÅŸêŸä ÿßŸÑÿØŸêŸëŸäŸÜŸê ŸàŸéÿπŸéŸÑŸêŸëŸÖŸíŸÜŸéÿß ÿßŸÑÿ™ŸéŸëÿ£ŸíŸàŸêŸäŸÑŸé**

*–ê–ª–ª–∞—Ö—É–º–º–∞ —Ñ–∞–∫–∫–∏—Ö–Ω–∞ —Ñ–∏-–¥-–¥–∏–Ω –≤–∞ –∞–ª–ª–∏–º–Ω–∞-—Ç-—Ç–∞–≤–∏–ª—å*

"–û –ê–ª–ª–∞—Ö, –¥–∞–π –Ω–∞–º –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–µ–ª–∏–≥–∏–∏ –∏ –Ω–∞—É—á–∏ –Ω–∞—Å —Ç–æ–ª–∫–æ–≤–∞–Ω–∏—é!"

**ŸàŸéÿßŸÑÿ≥ŸéŸëŸÑŸéÿßŸÖŸè ÿπŸéŸÑŸéŸäŸíŸÉŸèŸÖŸí ŸàŸéÿ±Ÿéÿ≠ŸíŸÖŸéÿ©Ÿè ÿßŸÑŸÑŸáŸê ŸàŸéÿ®Ÿéÿ±ŸéŸÉŸéÿßÿ™ŸèŸáŸè**
"""

# –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
st.markdown("### üìù –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –≤–≤–æ–¥–∞")

# –°–æ–∑–¥–∞–µ–º —Ç–∞–±—ã –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
tab1, tab2 = st.tabs(["üí¨ –¢–µ–∫—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å", "üñºÔ∏è –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"])

with tab1:
    user_input = st.text_area(
        "–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –æ–± –ò—Å–ª–∞–º–µ",
        placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–∞–∫–æ–π —Ö—É–∫–º —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞–º–∞–∑–∞ –≤ –¥–∂–∏–Ω—Å–∞—Ö?",
        height=150,
        key="text_input"
    )
    
    analyze_text_button = st.button(
        "üîç –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç",
        type="primary",
        use_container_width=True,
        key="text_analyze"
    )
    
    if analyze_text_button and user_input:
        with st.spinner("üîÑ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –≤–æ–ø—Ä–æ—Å... –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ."):
            try:
                response = agent.run(user_input + "\n\n" + query)
                st.markdown("### üìã –û—Ç–≤–µ—Ç")
                st.markdown("---")
                st.markdown(response.content)
                st.markdown("---")
                st.caption(
                    "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≠—Ç–æ—Ç –æ—Ç–≤–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –ò–ò. –î–ª—è –≤–∞–∂–Ω—ã—Ö —Ä–µ–ª–∏–≥–∏–æ–∑–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ "
                    "—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏—Å–ª–∞–º—Å–∫–∏–º —É—á—ë–Ω—ã–º."
                )
            except Exception as e:
                st.error(f"‚ùå –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏–∑–∞: {e}")
    elif analyze_text_button and not user_input:
        st.warning("‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å")

with tab2:
    uploaded_file = st.file_uploader(
        "–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—É—Ä—ã, —Ö–∞–¥–∏—Å–∞ –∏–ª–∏ –∞—Ä–∞–±—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞",
        type=["jpg", "jpeg", "png"],
        help="–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPG, JPEG, PNG",
        key="image_upload"
    )
    
    if uploaded_file is not None:
        col1, col2, col3 = st.columns([1, 2, 1])
        with col2:
            image = PILImage.open(uploaded_file)
            width, height = image.size
            aspect_ratio = width / height
            new_width = 500
            new_height = int(new_width / aspect_ratio)
            resized_image = image.resize((new_width, new_height))

            st.image(
                resized_image,
                caption="–ó–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ",
                use_container_width=True
            )

        analyze_image_button = st.button(
            "üîç –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ",
            type="primary",
            use_container_width=True,
            key="image_analyze"
        )

        if analyze_image_button:
            with st.spinner("üîÑ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ... –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ."):
                try:
                    # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                    os.makedirs("images", exist_ok=True)
                    
                    temp_path = "images/temp_resized_image.png"
                    resized_image.save(temp_path)

                    agno_image = AgnoImage(filepath=temp_path)

                    response = img_agent.run(query, images=[agno_image])
                    st.markdown("### üìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞")
                    st.markdown("---")
                    st.markdown(response.content)
                    st.markdown("---")
                    st.caption(
                        "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≠—Ç–æ—Ç –∞–Ω–∞–ª–∏–∑ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –ò–ò. –î–ª—è –≤–∞–∂–Ω—ã—Ö —Ä–µ–ª–∏–≥–∏–æ–∑–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ "
                        "—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏—Å–ª–∞–º—Å–∫–∏–º —É—á—ë–Ω—ã–º."
                    )
                    
                    # –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
                    if os.path.exists(temp_path):
                        os.remove(temp_path)
                        
                except Exception as e:
                    st.error(f"‚ùå –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏–∑–∞: {e}")
    else:
        st.info("üëÜ –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞")

# –§—É—Ç–µ—Ä
st.markdown("---")
st.markdown(
    """
    <div style='text-align: center; color: gray;'>
    <p>üïå –ò—Å–ª–∞–º—Å–∫–∏–π –∞–≥–µ–Ω—Ç –Ω–∞ –±–∞–∑–µ –ò–ò | —Ö–∞–Ω–∞—Ñ–∏—Ç—Å–∫–∏–π –º–∞–∑—Ö–∞–±</p>
    <p style='font-size: 0.8em;'>Powered by Google Gemini & DuckDuckGo</p>
    </div>
    """,
    unsafe_allow_html=True
)